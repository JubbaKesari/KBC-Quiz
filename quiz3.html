<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quiz 3-Blood Relations</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    .nav-dots {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
    }

    .dot {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: #444;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .dot.active {
      border: 2px solid cyan;
      background-color: black;
      color: cyan;
    }

    .dot.completed {
      background-color: green;
    }

    .quiz-container {
      margin: 30px auto;
      padding: 20px;
      background-color: #1e1e1e;
      border-radius: 10px;
      width: 90%;
      max-width: 700px;
      box-shadow: 0 0 20px cyan;
    }

    .quiz-title {
      font-size: 28px;
      font-weight: bold;
      color: cyan;
      margin-bottom: 5px;
    }

    .quiz-level {
      font-size: 16px;
      color: limegreen;
      margin-bottom: 15px;
    }

    .quiz-question {
      margin: 20px 0;
      font-size: 18px;
    }

    .options-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin: 20px 0;
    }

    .option-btn {
      padding: 12px 25px;
      background-color: #333;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }

    .option-btn:hover {
      background-color: #555;
    }

    .option-btn.selected {
      background-color: teal;
    }

    .option-btn.correct {
      background-color: green;
    }

    .timer {
      font-size: 18px;
      color: yellow;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0% { opacity: 1; }
      100% { opacity: 0.6; }
    }

    .controls {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .controls button {
      padding: 10px 20px;
      font-size: 15px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }

    #lockBtn {
      background-color: darkred;
      color: white;
    }

    #nextBtn {
      background-color: gray;
      color: white;
    }

    #nextBtn.enabled {
      background-color: darkgreen;
      cursor: pointer;
    }

    .warning-msg {
      color: orange;
      margin-top: 15px;
      font-size: 15px;
    }
  </style>
</head>
<body>
  <div class="nav-dots">
    <div class="dot completed">1</div>
    <div class="dot completed">2</div>
    <div class="dot active">3</div>
    <div class="dot">4</div>
    <div class="dot">5</div>
    <div class="dot">6</div>
    <div class="dot">7</div>
    <div class="dot">8</div>
    <div class="dot">9</div>
    <div class="dot">10</div>
    <div class="dot">11</div>
    <div class="dot">12</div>
    <div class="dot">13</div>
    <div class="dot">14</div>
    <div class="dot">15</div>
  </div>

  <div class="quiz-container">
    <div class="quiz-title">Quiz 3</div>
    <div class="quiz-level">Level – Easy</div>
    <div class="quiz-question">
      Pointing to a lady, Rahul said, “She is the wife of my mother’s father’s only grandchild.”<br><br>
      How is that lady related to Rahul?
    </div>

    <div class="options-container">
      <button class="option-btn" onclick="selectOption(this, 'mother')">Mother</button>
      <button class="option-btn" onclick="selectOption(this, 'sister')">Sister</button>
      <button class="option-btn" onclick="selectOption(this, 'wife')">Wife</button>
      <button class="option-btn" onclick="selectOption(this, 'daughter')">Daughter</button>
    </div>

    <div class="timer" id="timer">Time Left: 60s</div>

    <div class="controls">
      <button id="lockBtn" onclick="lockResponse()">Lock Your Response</button>
      <button id="nextBtn" onclick="goToNext()" disabled>Next Quiz →</button>
    </div>

    <div class="warning-msg" id="warningMsg"></div>
  </div>

  <script>
    let selectedOption = null;
    let locked = false;
    let timer = 60;
    let interval;
    const correctAnswer = "wife";

    const timerEl = document.getElementById("timer");
    const warningMsg = document.getElementById("warningMsg");
    const nextBtn = document.getElementById("nextBtn");
    const lockBtn = document.getElementById("lockBtn");

    function selectOption(btn, val) {
      if (locked) return;
      selectedOption = val;
      document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
    }

    function lockResponse(showCorrect = true) {
      if (locked) return;
      locked = true;
      clearInterval(interval);
      lockBtn.disabled = true;
      nextBtn.disabled = false;
      nextBtn.classList.add('enabled');

      if (selectedOption) {
        localStorage.setItem("quiz3", selectedOption);
      }

      if (showCorrect) {
        document.querySelectorAll('.option-btn').forEach(btn => {
          const val = btn.textContent.toLowerCase();
          if (val === correctAnswer) btn.classList.add("correct");
        });
      }
    }

    function goToNext() {
      window.location.href = "quiz4.html";
    }

    function startTimer() {
      interval = setInterval(() => {
        if (timer > 0) {
          timer--;
          timerEl.textContent = `Time Left: ${timer}s`;
        } else {
          timerEl.textContent = "⏰ Time's up!";
          warningMsg.textContent = "⏰ Time's up! The correct answer is highlighted.";
          lockResponse(true);
        }
      }, 1000);
    }

    // Fullscreen enforcement and tab detection
    document.addEventListener("visibilitychange", () => {
      if (document.hidden && !locked) {
        warningMsg.textContent = "⚠️ Quiz paused because you left the page.";
        lockResponse(false); // Don't reveal answer on tab switch
      }
    });

    window.onload = () => {
      const prev = localStorage.getItem("quiz3");
      if (prev) {
        locked = true;
        lockBtn.disabled = true;
        nextBtn.disabled = false;
        nextBtn.classList.add('enabled');
        document.querySelectorAll('.option-btn').forEach(btn => {
          if (btn.textContent.toLowerCase() === prev) {
            btn.classList.add("selected");
          }
          if (btn.textContent.toLowerCase() === correctAnswer) {
            btn.classList.add("correct");
          }
        });
      } else {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen().catch(() => {});
        }
        startTimer();
      }
    };
  </script>
</body>
</html>
